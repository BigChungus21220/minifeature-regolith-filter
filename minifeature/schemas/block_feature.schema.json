{
  "type": "object",
  "properties": {
    "type": { "const": "block" },
    "places_block": {
      "anyOf": [
        {
          "$ref": "block_ref.schema.json"
        },
        {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "weight": {
                "type": "number"
              },
              "block": {
                "$ref": "block_ref.schema.json"
              }
            },
            "required": ["weight", "block"],
            "additionalProperties": false
          }
        }
      ]
    },
    "enforce_placement_rules": {
      "type": "boolean"
    },
    "enforce_survivability_rules": {
      "type": "boolean"
    },
    "randomize_rotation": {
      "type": "boolean"
    },
    "may_attach_to": {
      "type": "object",
      "properties": {
        "min_sides_must_attach": {
          "type": "integer",
          "minimum": 1,
          "maximum": 4
        },
        "auto_rotate": {
          "type": "boolean"
        },
        "top": { "$ref": "face_attachment.schema.json" },
        "bottom": { "$ref": "face_attachment.schema.json" },
        "north": { "$ref": "face_attachment.schema.json" },
        "south": { "$ref": "face_attachment.schema.json" },
        "east": { "$ref": "face_attachment.schema.json" },
        "west": { "$ref": "face_attachment.schema.json" },
        "sides": { "$ref": "face_attachment.schema.json" },
        "all": { "$ref": "face_attachment.schema.json" },
        "diagonal": { "$ref": "face_attachment.schema.json" }
      },
      "additionalProperties": false
    },
    "may_not_attach_to": {
      "type": "object",
      "properties": {
        "top": { "$ref": "face_attachment.schema.json" },
        "bottom": { "$ref": "face_attachment.schema.json" },
        "north": { "$ref": "face_attachment.schema.json" },
        "south": { "$ref": "face_attachment.schema.json" },
        "east": { "$ref": "face_attachment.schema.json" },
        "west": { "$ref": "face_attachment.schema.json" },
        "sides": { "$ref": "face_attachment.schema.json" },
        "all": { "$ref": "face_attachment.schema.json" },
        "diagonal": { "$ref": "face_attachment.schema.json" }
      },
      "additionalProperties": false
    },
    "may_replace": {
      "type": "array",
      "items": {
        "$ref": "block_ref.schema.json"
      },
      "minItems": 1
    }
  },
  "required": [
    "places_block",
    "enforce_placement_rules",
    "enforce_survivability_rules"
  ],
  "additionalProperties": false
}
